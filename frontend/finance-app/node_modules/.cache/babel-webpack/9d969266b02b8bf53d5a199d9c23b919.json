{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/kryst/Desktop/frontend/finance-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { catchError, map } from \"rxjs/operators\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"../../services/ticker.service\";\nimport * as i3 from \"@angular/flex-layout/flex\";\nimport * as i4 from \"@angular/material/form-field\";\nimport * as i5 from \"@angular/material/input\";\nimport * as i6 from \"@angular/material/button\";\nimport * as i7 from \"@angular/material/icon\";\nimport * as i8 from \"@angular/material/tooltip\";\nimport * as i9 from \"@angular/common\";\nimport * as i10 from \"../../components/company-card/company-card.component\";\nimport * as i11 from \"../../components/company-chart/company-chart.component\";\nimport * as i12 from \"@angular/material/progress-spinner\";\n\nfunction DashboardComponent_div_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 11);\n    i0.ɵɵelementStart(1, \"div\", 12);\n    i0.ɵɵelement(2, \"app-company-card\", 13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 14);\n    i0.ɵɵelement(4, \"app-company-chart\", 15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"tickerDetails\", ctx_r0.tickerDetails);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"chartData\", ctx_r0.chartData);\n  }\n}\n\nfunction DashboardComponent_div_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 16);\n    i0.ɵɵelement(1, \"mat-spinner\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nexport class DashboardComponent {\n  constructor(formBuilder, tickerService) {\n    this.formBuilder = formBuilder;\n    this.tickerService = tickerService;\n    this.form = this.formBuilder.group({\n      symbol: ['']\n    });\n    this.tickerDetails = null;\n    this.chartData = null;\n    this.spinnerTrigger = false;\n  }\n\n  search() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      var _a;\n\n      const symbol = (_a = _this.form.get('symbol')) === null || _a === void 0 ? void 0 : _a.value;\n      _this.spinnerTrigger = true;\n\n      if (symbol) {\n        _this.tickerDetails = yield _this.tickerService.getTickerDetails(symbol);\n        _this.chartData = yield _this.tickerService.getTickerAggregation(symbol, 5, 'minute', '2021-03-21', '2021-03-26').pipe(map(response => {\n          return response.results.map(e => [e.t, e.o, e.h, e.l, e.c]);\n        }), catchError(err => {\n          return [];\n        })).toPromise();\n      }\n\n      _this.spinnerTrigger = false;\n    })();\n  }\n\n}\n\nDashboardComponent.ɵfac = function DashboardComponent_Factory(t) {\n  return new (t || DashboardComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.TickerService));\n};\n\nDashboardComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: DashboardComponent,\n  selectors: [[\"app-dashboard\"]],\n  decls: 17,\n  vars: 3,\n  consts: [[\"fxLayout\", \"column\", \"fxLayoutAlign\", \"center\", 1, \"container\"], [\"fxLayout\", \"row\", \"fxLayoutAlign\", \"center\"], [\"fxFlex\", \"50\", \"fxFlex.xs\", \"80\"], [3, \"formGroup\", \"ngSubmit\"], [\"appearance\", \"outline\", 1, \"full-width\"], [\"type\", \"email\", \"matInput\", \"\", \"placeholder\", \"Type in searched company\", \"formControlName\", \"symbol\"], [\"type\", \"submit\", \"mat-icon-button\", \"\", \"matSuffix\", \"\"], [\"fxFlex\", \"10\", \"fxFlex.xs\", \"20\", \"fxLayoutAlign\", \"center\"], [\"mat-fab\", \"\", \"color\", \"primary\", \"matTooltip\", \"Go to watchlist\", \"matTooltipPosition\", \"right\", \"matTooltipHideDelay\", \"100000\"], [\"fxLayout\", \"row\", \"fxLayout.xs\", \"column\", \"fxLayoutGap\", \"20px\", 4, \"ngIf\"], [\"fxLayout\", \"row\", \"fxLayoutAlign\", \"center\", \"fxFlex\", \"100\", 4, \"ngIf\"], [\"fxLayout\", \"row\", \"fxLayout.xs\", \"column\", \"fxLayoutGap\", \"20px\"], [\"fxFlex\", \"40\", \"fxFlex.xs\", \"100\"], [3, \"tickerDetails\"], [\"fxFlex\", \"60\", \"fxFlex.xs\", \"100\"], [3, \"chartData\"], [\"fxLayout\", \"row\", \"fxLayoutAlign\", \"center\", \"fxFlex\", \"100\"]],\n  template: function DashboardComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵelementStart(1, \"div\", 1);\n      i0.ɵɵelementStart(2, \"div\", 2);\n      i0.ɵɵelementStart(3, \"form\", 3);\n      i0.ɵɵlistener(\"ngSubmit\", function DashboardComponent_Template_form_ngSubmit_3_listener() {\n        return ctx.search();\n      });\n      i0.ɵɵelementStart(4, \"mat-form-field\", 4);\n      i0.ɵɵelementStart(5, \"mat-label\");\n      i0.ɵɵtext(6, \"Company Symbol\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(7, \"input\", 5);\n      i0.ɵɵelementStart(8, \"button\", 6);\n      i0.ɵɵelementStart(9, \"mat-icon\");\n      i0.ɵɵtext(10, \"search\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(11, \"div\", 7);\n      i0.ɵɵelementStart(12, \"button\", 8);\n      i0.ɵɵelementStart(13, \"mat-icon\");\n      i0.ɵɵtext(14, \"list\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(15, DashboardComponent_div_15_Template, 5, 2, \"div\", 9);\n      i0.ɵɵtemplate(16, DashboardComponent_div_16_Template, 2, 0, \"div\", 10);\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"formGroup\", ctx.form);\n      i0.ɵɵadvance(12);\n      i0.ɵɵproperty(\"ngIf\", ctx.tickerDetails && !ctx.spinnerTrigger);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.spinnerTrigger);\n    }\n  },\n  directives: [i3.DefaultLayoutDirective, i3.DefaultLayoutAlignDirective, i3.DefaultFlexDirective, i1.ɵNgNoValidate, i1.NgControlStatusGroup, i1.FormGroupDirective, i4.MatFormField, i4.MatLabel, i5.MatInput, i1.DefaultValueAccessor, i1.NgControlStatus, i1.FormControlName, i6.MatButton, i4.MatSuffix, i7.MatIcon, i8.MatTooltip, i9.NgIf, i3.DefaultLayoutGapDirective, i10.CompanyCardComponent, i11.CompanyChartComponent, i12.MatSpinner],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJkYXNoYm9hcmQuY29tcG9uZW50LmNzcyJ9 */\"]\n});","map":{"version":3,"sources":["C:\\Users\\kryst\\Desktop\\frontend\\finance-app\\src\\app\\pages\\dashboard\\dashboard.component.ts","C:\\Users\\kryst\\Desktop\\frontend\\finance-app\\src\\app\\pages\\dashboard\\dashboard.component.html"],"names":[],"mappings":"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","sourcesContent":["import {Component} from '@angular/core';\nimport {FormGroup, FormBuilder} from \"@angular/forms\";\nimport {TickerDetailResponseDto} from \"../../dtos/responses/ticker-detail-response-dto\";\nimport {TickerService} from \"../../services/ticker.service\";\nimport {TickerAggregationResponseDto} from \"../../dtos/responses/ticker-aggregation-response-dto\";\nimport {catchError, map} from \"rxjs/operators\";\n\n@Component({\n  selector: 'app-dashboard',\n  templateUrl: './dashboard.component.html',\n  styleUrls: ['./dashboard.component.css']\n})\nexport class DashboardComponent {\n\n  form: FormGroup = this.formBuilder.group({\n    symbol: ['']\n  });\n\n  tickerDetails: TickerDetailResponseDto | null = null;\n  chartData: Array<Array<number>> | null = null;\n\n  spinnerTrigger: boolean = false;\n\n  constructor(private formBuilder: FormBuilder, private tickerService: TickerService) {\n  }\n\n  async search() {\n    const symbol: string = this.form.get('symbol')?.value;\n    this.spinnerTrigger = true;\n\n    if (symbol) {\n\n      this.tickerDetails = await this.tickerService.getTickerDetails(symbol);\n      this.chartData = await this.tickerService.getTickerAggregation(symbol, 5, 'minute', '2021-03-21', '2021-03-26')\n        .pipe(\n          map(response => {\n            return response.results.map(e => [e.t, e.o, e.h, e.l, e.c])\n          }),\n          catchError(err => {\n            return [];\n          })\n        ).toPromise();\n\n    }\n\n    this.spinnerTrigger = false;\n  }\n\n}\n","<div class=\"container\" fxLayout=\"column\" fxLayoutAlign=\"center\">\r\n\r\n  <div fxLayout=\"row\" fxLayoutAlign=\"center\">\r\n    <div fxFlex=\"50\" fxFlex.xs=\"80\">\r\n      <form [formGroup]=\"form\" (ngSubmit)=\"search()\">\r\n        <mat-form-field class=\"full-width\" appearance=\"outline\">\r\n          <mat-label>Company Symbol</mat-label>\r\n          <input type=\"email\" matInput placeholder=\"Type in searched company\" formControlName=\"symbol\">\r\n          <button type=\"submit\" mat-icon-button matSuffix>\r\n            <mat-icon>search</mat-icon>\r\n          </button>\r\n        </mat-form-field>\r\n      </form>\r\n    </div>\r\n\r\n    <div fxFlex=\"10\" fxFlex.xs=\"20\" fxLayoutAlign=\"center\">\r\n      <button mat-fab color=\"primary\" matTooltip=\"Go to watchlist\" matTooltipPosition=\"right\"\r\n              matTooltipHideDelay=\"100000\">\r\n        <mat-icon>list</mat-icon>\r\n      </button>\r\n    </div>\r\n  </div>\r\n\r\n  <div fxLayout=\"row\" fxLayout.xs=\"column\" fxLayoutGap=\"20px\" *ngIf=\"tickerDetails && !spinnerTrigger\">\r\n\r\n    <div fxFlex=\"40\" fxFlex.xs=\"100\">\r\n      <app-company-card [tickerDetails]=\"tickerDetails\"></app-company-card>\r\n    </div>\r\n\r\n    <div fxFlex=\"60\" fxFlex.xs=\"100\">\r\n      <app-company-chart [chartData]=\"chartData\"></app-company-chart>\r\n    </div>\r\n\r\n  </div>\r\n\r\n  <div fxLayout=\"row\" fxLayoutAlign=\"center\" fxFlex=\"100\" *ngIf=\"spinnerTrigger\">\r\n    <mat-spinner></mat-spinner>\r\n  </div>\r\n\r\n</div>\r\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}