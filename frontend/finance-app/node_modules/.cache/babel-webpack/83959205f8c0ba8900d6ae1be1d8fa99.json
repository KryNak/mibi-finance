{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/kryst/Desktop/frontend/finance-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { LoginRequestDto } from '../dtos/requests/login-request-dto';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport class LoginService {\n  constructor(http) {\n    this.http = http;\n  }\n\n  login(username, password) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      const loginPromise = _this.http.post('http://www.localhost:8080/api/accounts/login', new LoginRequestDto(username, password)).toPromise();\n\n      return yield loginPromise.then(loginResponse => {\n        localStorage.setItem('accessToken', loginResponse.accessToken);\n        localStorage.setItem('refreshToken', loginResponse.refreshToken);\n        return true;\n      }).catch(ignore => {\n        return false;\n      });\n    })();\n  }\n\n}\n\nLoginService.ɵfac = function LoginService_Factory(t) {\n  return new (t || LoginService)(i0.ɵɵinject(i1.HttpClient));\n};\n\nLoginService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: LoginService,\n  factory: LoginService.ɵfac\n});","map":{"version":3,"sources":["C:\\Users\\kryst\\Desktop\\frontend\\finance-app\\src\\app\\services\\login.service.ts"],"names":[],"mappings":";AAGA,SAAQ,eAAR,QAA8B,oCAA9B;;;AAGA,OAAM,MAAO,YAAP,CAAmB;AAEvB,EAAA,WAAA,CAAoB,IAApB,EAAoC;AAAhB,SAAA,IAAA,GAAA,IAAA;AACnB;;AAEK,EAAA,KAAK,CAAC,QAAD,EAAmB,QAAnB,EAAmC;AAAA;;AAAA;AAC5C,YAAM,YAAY,GAA8B,KAAI,CAAC,IAAL,CAC7C,IAD6C,CACtB,8CADsB,EAC0B,IAAI,eAAJ,CAAoB,QAApB,EAA8B,QAA9B,CAD1B,EAE7C,SAF6C,EAAhD;;AAIA,mBAAa,YAAY,CACtB,IADU,CACL,aAAa,IAAG;AACpB,QAAA,YAAY,CAAC,OAAb,CAAqB,aAArB,EAAoC,aAAa,CAAC,WAAlD;AACA,QAAA,YAAY,CAAC,OAAb,CAAqB,cAArB,EAAqC,aAAa,CAAC,YAAnD;AACA,eAAO,IAAP;AACD,OALU,EAMV,KANU,CAMJ,MAAM,IAAG;AACd,eAAO,KAAP;AACD,OARU,CAAb;AAL4C;AAc7C;;AAnBsB;;;mBAAZ,Y,EAAY,EAAA,CAAA,QAAA,CAAA,EAAA,CAAA,UAAA,C;AAAA,C;;;SAAZ,Y;AAAY,EAAA,OAAA,EAAZ,YAAY,CAAA","sourcesContent":["import {Injectable} from '@angular/core';\nimport {HttpClient} from '@angular/common/http';\nimport {LoginResponseDto} from '../dtos/responses/login-response-dto';\nimport {LoginRequestDto} from '../dtos/requests/login-request-dto';\n\n@Injectable()\nexport class LoginService {\n\n  constructor(private http: HttpClient) {\n  }\n\n  async login(username: string, password: string): Promise<boolean> {\n    const loginPromise: Promise<LoginResponseDto> = this.http\n      .post<LoginResponseDto>('http://www.localhost:8080/api/accounts/login', new LoginRequestDto(username, password))\n      .toPromise();\n\n    return await loginPromise\n      .then(loginResponse => {\n        localStorage.setItem('accessToken', loginResponse.accessToken);\n        localStorage.setItem('refreshToken', loginResponse.refreshToken);\n        return true;\n      })\n      .catch(ignore => {\n        return false;\n      });\n  }\n\n}\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}