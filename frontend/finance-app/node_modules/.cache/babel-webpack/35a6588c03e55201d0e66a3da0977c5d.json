{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/kryst/Desktop/frontend/finance-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { LoginRequestDto } from '../dtos/requests/login-request-dto';\nimport { RegisterRequestDto } from \"../dtos/requests/register-request-dto\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport class AccountsService {\n  constructor(http) {\n    this.http = http;\n  }\n\n  login(username, password) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      const loginPromise = _this.http.post('http://www.localhost:8080/api/accounts/login', new LoginRequestDto(username, password)).toPromise();\n\n      return yield loginPromise.then(loginResponse => {\n        localStorage.setItem('accessToken', loginResponse.accessToken);\n        localStorage.setItem('refreshToken', loginResponse.refreshToken);\n        return true;\n      }).catch(ignore => {\n        return false;\n      });\n    })();\n  }\n\n  register(username, password, passwordRepetition, email) {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      const request = new RegisterRequestDto(username, password, passwordRepetition, email);\n\n      const response = _this2.http.post('http://www.localhost:8080/api/accounts/register', request).toPromise();\n\n      return yield response.then(ignore => {\n        return true;\n      }).catch(ignore => {\n        return false;\n      });\n    })();\n  }\n\n  refresh() {\n    var _this3 = this;\n\n    return _asyncToGenerator(function* () {\n      var _a;\n\n      const refreshToken = (_a = localStorage.getItem('refreshToken')) !== null && _a !== void 0 ? _a : '';\n\n      const response = _this3.http.post('http://localhost:8080/api/accounts/refres');\n    })();\n  }\n\n}\n\nAccountsService.ɵfac = function AccountsService_Factory(t) {\n  return new (t || AccountsService)(i0.ɵɵinject(i1.HttpClient));\n};\n\nAccountsService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: AccountsService,\n  factory: AccountsService.ɵfac\n});","map":{"version":3,"sources":["C:\\Users\\kryst\\Desktop\\frontend\\finance-app\\src\\app\\services\\accounts.service.ts"],"names":[],"mappings":";AAGA,SAAQ,eAAR,QAA8B,oCAA9B;AACA,SAAQ,kBAAR,QAAiC,uCAAjC;;;AAIA,OAAM,MAAO,eAAP,CAAsB;AAE1B,EAAA,WAAA,CAAoB,IAApB,EAAoC;AAAhB,SAAA,IAAA,GAAA,IAAA;AACnB;;AAEK,EAAA,KAAK,CAAC,QAAD,EAAmB,QAAnB,EAAmC;AAAA;;AAAA;AAC5C,YAAM,YAAY,GAA8B,KAAI,CAAC,IAAL,CAC7C,IAD6C,CACtB,8CADsB,EAC0B,IAAI,eAAJ,CAAoB,QAApB,EAA8B,QAA9B,CAD1B,EAE7C,SAF6C,EAAhD;;AAIA,mBAAa,YAAY,CACtB,IADU,CACL,aAAa,IAAG;AACpB,QAAA,YAAY,CAAC,OAAb,CAAqB,aAArB,EAAoC,aAAa,CAAC,WAAlD;AACA,QAAA,YAAY,CAAC,OAAb,CAAqB,cAArB,EAAqC,aAAa,CAAC,YAAnD;AACA,eAAO,IAAP;AACD,OALU,EAMV,KANU,CAMJ,MAAM,IAAG;AACd,eAAO,KAAP;AACD,OARU,CAAb;AAL4C;AAc7C;;AAEK,EAAA,QAAQ,CAAC,QAAD,EAAmB,QAAnB,EAAqC,kBAArC,EAAiE,KAAjE,EAA8E;AAAA;;AAAA;AAC1F,YAAM,OAAO,GAAuB,IAAI,kBAAJ,CAAuB,QAAvB,EAAiC,QAAjC,EAA2C,kBAA3C,EAA+D,KAA/D,CAApC;;AACA,YAAM,QAAQ,GAAiC,MAAI,CAAC,IAAL,CAC5C,IAD4C,CAClB,iDADkB,EACiC,OADjC,EAE5C,SAF4C,EAA/C;;AAIA,mBAAa,QAAQ,CAClB,IADU,CACL,MAAM,IAAG;AACb,eAAO,IAAP;AACD,OAHU,EAIV,KAJU,CAIJ,MAAM,IAAG;AACd,eAAO,KAAP;AACD,OANU,CAAb;AAN0F;AAa3F;;AAEK,EAAA,OAAO,GAAA;AAAA;;AAAA;;;AACX,YAAM,YAAY,GAAW,CAAA,EAAA,GAAA,YAAY,CAAC,OAAb,CAAqB,cAArB,CAAA,MAAoC,IAApC,IAAoC,EAAA,KAAA,KAAA,CAApC,GAAoC,EAApC,GAAwC,EAArE;;AAEA,YAAM,QAAQ,GAAqB,MAAI,CAAC,IAAL,CAChC,IADgC,CACT,2CADS,CAAnC;AAHW;AAKZ;;AAzCyB;;;mBAAf,e,EAAe,EAAA,CAAA,QAAA,CAAA,EAAA,CAAA,UAAA,C;AAAA,C;;;SAAf,e;AAAe,EAAA,OAAA,EAAf,eAAe,CAAA","sourcesContent":["import {Injectable} from '@angular/core';\nimport {HttpClient} from '@angular/common/http';\nimport {LoginResponseDto} from '../dtos/responses/login-response-dto';\nimport {LoginRequestDto} from '../dtos/requests/login-request-dto';\nimport {RegisterRequestDto} from \"../dtos/requests/register-request-dto\";\nimport {RegisterResponseDto} from \"../dtos/responses/register-response-dto\";\n\n@Injectable()\nexport class AccountsService {\n\n  constructor(private http: HttpClient) {\n  }\n\n  async login(username: string, password: string): Promise<boolean> {\n    const loginPromise: Promise<LoginResponseDto> = this.http\n      .post<LoginResponseDto>('http://www.localhost:8080/api/accounts/login', new LoginRequestDto(username, password))\n      .toPromise();\n\n    return await loginPromise\n      .then(loginResponse => {\n        localStorage.setItem('accessToken', loginResponse.accessToken);\n        localStorage.setItem('refreshToken', loginResponse.refreshToken);\n        return true;\n      })\n      .catch(ignore => {\n        return false;\n      });\n  }\n\n  async register(username: string, password: string, passwordRepetition: string, email: string): Promise<boolean> {\n    const request: RegisterRequestDto = new RegisterRequestDto(username, password, passwordRepetition, email);\n    const response: Promise<RegisterResponseDto> = this.http\n      .post<RegisterResponseDto>('http://www.localhost:8080/api/accounts/register', request)\n      .toPromise();\n\n    return await response\n      .then(ignore => {\n        return true;\n      })\n      .catch(ignore => {\n        return false;\n      });\n  }\n\n  async refresh(){\n    const refreshToken: string = localStorage.getItem('refreshToken') ?? '';\n\n    const response: LoginResponseDto = this.http\n      .post<LoginResponseDto>('http://localhost:8080/api/accounts/refres')\n  }\n\n}\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}